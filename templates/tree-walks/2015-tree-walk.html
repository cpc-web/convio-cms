<!-- DEFAULT ATTRACTION TEMPLATE v3 - responsive image updated 12 Feb 2015 -->
<style type="text/css"><!--
    /*This style has to be in nav.css */
    
    #subnav li { position: relative; }
    #subnav li ul { display: none; position: absolute; left: 60%; top: 0;  width: 100%; background-color: #666666; z-index: 1000; padding: 10px; border: 1px solid #777777; }
    #subnav li ul:after, #subnav li ul:before { right: 100%; top: 18px; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none; }
    #subnav li ul:after { border-color: rgba(102, 102, 102, 0); border-right-color: #666666; border-width: 9px; margin-top: -9px; }
    #subnav li ul:before { border-color: rgba(204, 204, 204, 0); border-right-color: #777777; border-width: 11px; margin-top: -11px; }
    #subnav li:hover ul { display: block; }
    .dropdownShare:hover .dropdown-menu-share { display: block; }
    .dropdown-menu-share { min-width: 180px; margin: 0; }
    
    .sectionToggle { 
    	left: 30%;
    	width: 40%;
    	margin: 0 auto;
    	position: absolute;
    	top: 0;
    	z-index: 1000;
    }
    
    .left-nav.collapse {
      display: none !important;
    }
    
    .properties {
      border-collapse: collapse;
      margin: 40px 0;
    }
    .properties td:first-child {
      font-weight: bold;
      width: 120px;
    }
    .tree-location { 
    	background-color: #D1D3D4;
    	margin: 10px auto;
    	max-width: 500px;
    	padding: 10px;
    }
    .attribute {
    	margin-top: 10px;
    }
    .attribute img {
    	margin-right: 10px;
    	max-width: 50%;
    }
    .attribute h3 {
    	margin-top: 0;
    }
    
    .btn-primary  {
      background: #79bf43;
      background-image: -webkit-linear-gradient(top, #79bf43, #69962e);
      background-image: -moz-linear-gradient(top, #79bf43, #69962e);
      background-image: -ms-linear-gradient(top, #79bf43, #69962e);
      background-image: -o-linear-gradient(top, #79bf43, #69962e);
      background-image: linear-gradient(to bottom, #79bf43, #69962e);
      -webkit-border-radius: 19;
      -moz-border-radius: 19;
      border-radius: 19px;
      -webkit-box-shadow: 2px 2px 2px #666666;
      -moz-box-shadow: 2px 2px 2px #666666;
      box-shadow: 2px 2px 2px #666666;
      color: #ffffff !important;
      font-size: 12px;
      padding: 8px 20px 8px 20px !important;
      border: solid #79bf43 0px;
      text-decoration: none;
      text-transform:uppercase;
      text-align:center;
      margin-left:15px;
      margin-right:15px
    }
    
    .btn-primary :hover {
      background: #8ad150;
      background-image: -webkit-linear-gradient(top, #8ad150, #69962e);
      background-image: -moz-linear-gradient(top, #8ad150, #69962e);
      background-image: -ms-linear-gradient(top, #8ad150, #69962e);
      background-image: -o-linear-gradient(top, #8ad150, #69962e);
      background-image: linear-gradient(to bottom, #8ad150, #69962e);
      text-decoration: none;
      color: #ffffff;
      text-transform:uppercase;
    }
    
    .species-modal .modal-dialog {
      max-width: 500px;
      padding:0;
    }
    
    .species-modal .modal-body {
      position: relative;
      padding: 0;
    }
    
    .species-modal .table td {
      padding-left:20px !important;
    }
    .species-modal .modal-body p {
      padding:20px 20px 0 20px;
    }
    
    .species-modal .modal-body h4 {
      padding:20px 20px 0 20px;
      color: #77BD42;
      font-family: 'Titling Gothic FB Narr',sans-serif;
      margin-top:-25px;
    }
    
    .species-modal .modal-header {
      min-height: 16.4286px;
      padding: 6px;
      border:none;
      top: 0;
      position: relative;
      z-index: 999;
      float: right;
      background-color: #FFFFFF;
    }
    
    .modal-title, .tabs {
      margin: 10px 10px 0;
    }
    .tabs .tab {
      display: inline-block;
    }
    .tabs .tab span {
      color: #77BD42;
      cursor: pointer;
    }
    .tabs .tab span.active {
      font-weight: bold;
    }
    
    .panels .panel {
      display: none;
    }
    .panels .panel.active {
      display: block;
    }
    
    .map-title{
      background-color: #77BD42;
      color: #fff;
      text-align: center;
      padding: 10px 30px;
      margin: 0 auto;
    }
    #map {
      border: 5px solid #77BD42;
      height: 600px;
      margin: 0 auto 30px;
    }
    
    .map-alternative > div {
      background-color: #f7f7f7;
      padding: 10px 0;
      text-align:center;
    }

    .map-alternative h3 {
      margin-top: 0;
      margin-bottom: 10px;
    }

    .map-alternative img {
      margin-bottom: 30px;
      max-width: 90%;   
    }

.map-alternative .btn {    
padding: 6px 20px;
margin-bottom: 0px;
font-size: 16px;
line-height: 23px;
font-family: 'Titling Gothic FB Cond', sans-serif;
text-transform: uppercase;
color: white;
background: none repeat scroll 0% 0% #68b247;
cursor: pointer;
text-align: center;
vertical-align: middle;
box-shadow: 0px 1px 0px #666;
border: none;
margin-bottom: 10px;
}

.map-alternative .btn:hover, .map-alternative .btn:focus {
color: white;
outline: none;
opacity: .7;
}

.map-alternative a.btn, .map-alternative a.btn:link, .map-alternative a.btn:visited {
    padding-bottom: 5px;
     color: white; 
}
    
    @media(max-width:767px) {
    	.left-nav {
    		min-height: 30px;
    		padding: 0px;
    		width: 100%;
    	}
    	.secondnav { visibility: visible; }
    	.top-image { visibility: hidden; height: 55px; }
    	
    	#map {
        height: 450px;
      }
    }
--></style>

<div id="rdURL" style="display: none;">${redirect_url}</div>

<script type="text/javascript">// <![CDATA[
  var element = document.getElementById('rdURL');
  // innerText for IE, textContent for other browsers
  var text = element.innerText || element.textContent;
  if ( text != '') { window.location=text; }
// ]]></script>

<!-- Top Image	================================================== -->
<div class="top-image"><t:if test="top_image.length &gt; 0"> <img alt="Top Image" class="img-responsive hidden" id="top_image" src="${top_image.url}" /> </t:if>
<t:else> <t:set id="randomTopImg" value="random(5)+1"></t:set> <img alt="Top Image" class="img-responsive hidden" id="top_image" src="http://cpc.convio.net/redesign/img/header/insidepages${randomTopImg}_2014.jpg" /> </t:else>
</div>
<script type="text/javascript">// <![CDATA[
  jQuery(document).ready(function() { jQuery('#top_image').removeClass('hidden'); });
// ]]></script>

<!-- /.top-image -->
<div class="sectionToggle"><button class="navbar-toggle knockout hidden-md hidden-lg" data-target=".left-nav" data-toggle="collapse"><span id="breadLink">Placeholder</span><span class="caret"></span></button></div>
<!--- /////////// EVERYTHING ABOVE THIS POINT IS COMMON TO ALL INTERIOR TEMPLATES ////////////// -->
<div class="main-body">
<div class="container">
<div class="row two-column-content"><!-- all page content -->
<div class="col-md-3 left-nav knockout collapse navbar-collapse"><!-- begin section nav -->
<div class="templateComponent" id="sectionNavigation-497998852" style="display: inline;"></div>
<!--div class=templateComponent id="sectionNavigation-167468350" style="DISPLAY: inline"></div--> <!-- end section nav --></div>
<!-- /.left-nav -->
<div class="col-md-9 right-content">
<div class="row content-utilities" id="">
<div class="col-md-9 col-md-offset-1">
<div class="hidden-xs" id="breadcrumbs"><t:include id="breadcrumb-167468353"></t:include></div>
</div>
<div class="col-md-2">
<div class="dropdownShare"><a class="dropdown-toggle" href="#" data-toggle="dropdown"> SHARE <span class="glyphicon glyphicon-share"></span> </a>
<ul class="dropdown-menu-share">
<li>
<p>Share On <a href="https://www.facebook.com/sharer/sharer.php?u=${url}"><img alt="Facebook" src="http://cpc.convio.net/redesign/img/cpc/facebook.png" /></a> <a href="https://twitter.com/share"><img alt="Twitter" src="http://cpc.convio.net/redesign/img/cpc/twitter.png" /></a> <a href="https://plus.google.com/share?url=${url}" onclick="javascript:window.open(this.href,
                    '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><img alt="Google +" src="http://cpc.convio.net/redesign/img/cpc/gplus.png" /></a> <a href="https://www.pinterest.com/pin/create/button/" data-pin-do="buttonBookmark" data-pin-shape="round"><img alt="Pinterest" src="http://cpc.convio.net/redesign/img/cpc/pinterest.png" style="margin-top: 5px;" /></a></p>
<p>Share by Email:</p>
<input class="emailShareInput" name="email" type="text" value="Your email here" /></li>
</ul>
</div>
</div>
<!-- /.row #content-utilities <span class="caret"></span>-->
<div class="row" id="main-content">
<div class="col-md-11 col-md-offset-1">
<h2 class="titleSection">${title}</h2>
<hr class="lineInside" /><!-- copied from old attractions template - restyle -->
<div class="row">
<div class="col-sm-12 col-xs-12"><!-- main column --> <!-- Tree Species Specific Info -->
<p><strong>About this Walk:</strong><br /> ${description}</p>
<br /><br />
<div class="row">
<div class="col-sm-6 col-xs-12">
  <h3 class="map-title">${title}</h3>
  <div id="map"></div>
</div>
<!--<t:if test="show_pdf == 'yes'">
<div class="col-sm-6 col-xs-12 map-alternative"><div>
  <h3>PDF Alternative</h3>
  <img src="${pdf_preview.url}" class="img-responsive">
  <a class="btn" href="${pdf.url}" target="_blank">Download</a>
</div></div>
</t:if>-->
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=true" type="text/javascript"></script>
<script type="text/javascript">// <![CDATA[
                    (function() {

                      if(!!navigator.geolocation) {
  
                        var map, marker;
  
                        var mapOptions = {
                          zoom: 15,
                          mapTypeId: google.maps.MapTypeId.ROADMAP,
                          styles: [
                            { featureType: "poi", elementType: "labels", stylers: [{ visibility: "off" }] },
                            { featureType: "transit", elementType: "labels", stylers: [{ visibility: "off" }] }
                          ]
                        };
    
                        map = new google.maps.Map(document.getElementById('map'), mapOptions);
    
                        var walkLayer = new google.maps.KmlLayer({
                          url: '${kml}',
                          map: map,
                          suppressInfoWindows: true
                        });
    
                        google.maps.event.addListener(walkLayer, 'click', function(event) {
                          var nodeID = event.featureData.description;
                          jQuery("#node_"+nodeID+" a").trigger('click');
                          jQuery("#node_"+nodeID+" .tabs .tab:first span").addClass('active');
    		                  jQuery("#node_"+nodeID+" .panels .panel:first").addClass('active');
                        });
  
                        navigator.geolocation.getCurrentPosition(function(position) {
                          var geolocate = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
      
                          marker = new google.maps.Marker({
                            map: map,
                            position: geolocate,
                            icon: {
                              path: google.maps.SymbolPath.CIRCLE,
                              scale: 5
                            }
                          });
      
                          map.setCenter(geolocate);
                        });
  
                        var watchID = navigator.geolocation.watchPosition(function(position) {
                          movePin( map, marker, position );
                        });
  
                        function movePin( map, marker, position ) {
                          marker.setPosition( new google.maps.LatLng(position.coords.latitude, position.coords.longitude) );
                          map.panTo( new google.maps.LatLng(position.coords.latitude, position.coords.longitude) );
                        };
    
                      } else {
                        document.getElementById('map').innerHTML = 'No Geolocation Support.';
                      }
  
                    })();
// ]]></script>

<div class="col-sm-6 col-xs-12">
<p><strong>Featured tree species along this walk:</strong></p>
<t:list id="tree_nodes">
<div class="node" id="node_${itemID}"><a href="#" data-target="#modal_node_${itemID}" data-toggle="modal"> <t:value id="title"></t:value> </a>
<div class="species-modal modal fade" id="modal_node_${itemID}" style="display: none;">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header"><button class="close" type="button" data-dismiss="modal">x</button></div>
<div class="modal-body">
<h3 class="modal-title">Species at this Location</h3>
<div class="tabs"><t:list id="tree_species">
<div class="tab"><span class="btn" data-target=".panel_${itemID}">${title}</span></div>
</t:list></div>
<div class="panels"><t:list id="tree_species">
<div class="panel panel_${itemID}"><t:if test="large.length &gt; 0"> <img class="img-responsive" src="${large.url}" /><br /> </t:if>
<h4 class="species-title">${common_name}<br /><em>${scientific_name}</em></h4>
<p class="text-center primary-buttons"><a class="btn btn-primary more-info" href="${url}" target="_blank" type="button">More Info</a><br /></p>
</tr>
</tbody>
</table>
</div>
</t:list></div>
</div>
</div>
</div>
</div>
</div>
</t:list>
</div>
</div>
</div>
</div>
</div>
</div>
<!--/main content--></div>
</div>
</div>
</div>
</div>
<!-- END old template--><!-- /.col-md-11 col-md-offset-1a--><!-- /.row #main-content --><!-- /.right-content--><!-- /.row two-column-content --><!-- /.container --><!-- /.MainBody -->
<script type="text/javascript">// <![CDATA[
    (function($){	
    	$(document).ready(function() {
    		$(".tabs .tab:first span").addClass('active');
    		$(".panels .panel:first").addClass('active');
    		
    		$(".tabs .tab span").on('click', function() {
    		  $(".tabs .tab span").removeClass('active');
    		  $(this).addClass('active');
    		  var target = $(this).attr("data-target");
    		  $(".panels .panel").removeClass('active');
    		  $(target).addClass('active');
    		});

        $(".node a").on('click', function() {
          var modal = $(this).attr("data-target");
          $(modal+" .tabs .tab span").removeClass('active');
          $(modal+" .panels .panel").removeClass('active');
          $(modal+" .tabs .tab:first span").addClass('active');
          $(modal+" .panels .panel:first").addClass('active');
        });
    	});
    })(jQuery);
// ]]></script>
</div> 